<div class="feed-container">
  <% if @property.nil? %>
    <div style="position: absolute; top: 30%;">
      <p class="text-center">No more properties match your criteria. Click below to view all of the properties you've liked</p>
      <%= link_to "My dashboard", dashboard_path(current_user), class: "btn btn-success text-align-center", style: "display: block; color: white;" %>
    </div>
  <% else %>
    <div class="feed-card">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false">
        <div class="carousel-inner" style="width: 100%; height: auto; margin-bottom: 2px;">
          <div class="carousel-item active">
            <img class="d-block w-100 feed-img" src="<%= cl_image_path @property.photos.first.key, height: 570, width: 350, crop: :fill %>" alt="First slide" style="position:relative; opacity: 80%;">
              <div class="icon-overlay">
                <div class="text-center">
                  <p class="description-location"><i class="far fa-compass" style="font-size: 26px;"></i><%= @property.location %><p>
                </div> 
                <div class="text-center">
                  <p class="top-description-distance"><i class="fas fa-train"></i></i> </p>
                  <p class="description-distance"><%= @property.distance_to_station %> minute walk<p>
                </div>
                <div class="text-center">
                  <p class="description-price"><i class="fas fa-tag"></i>¥<%= "#{@property.price.to_s[0..-4]},#{@property.price.to_s[-3..-1]}" %></p>
                </div>
              </div>     
          </div>
          <div class="carousel-item">
            <img class="d-block w-100 feed-img" src="<%= cl_image_path @property.photos.last.key, height: 570, width: 350, crop: :fill %>" alt="Second slide" style="position:relative; opacity: 80%;">
          </div>
          <div class="carousel-item">
            <img class="d-block w-100 inactive" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/pin-l-home+BA00D9(<%=@property.longitude%>,<%=@property.latitude%>)/<%=@property.longitude%>,<%=@property.latitude%>,14,0,0/600x1000?access_token=pk.eyJ1Ijoic2hvdWtvMDUyMiIsImEiOiJjazM4bDU2NW4wMzl3M2lxZTE5cml5a2tlIn0.s7I7YWPUw2sOQdWENcgDtA" alt="Second slide">
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>

        <div class="like-dislike-btns" >
          <div>
            <%= simple_form_for @property_viewing do |f| %>
              <%= f.input :property_id, :as => :hidden, :input_html => { :value => @property.id } %>
              <%= f.input :status, :as => :hidden, :input_html => { :value => "disliked" } %>
              <%= f.button :submit, "", class: "feed-no-btn"%>
            <% end %>
          </div>
          <div>
            <%= simple_form_for @property_viewing do |f| %>
              <%= f.input :property_id, :as => :hidden, :input_html => { :value => @property.id } %>
              <%= f.input :status, :as => :hidden, :input_html => { :value => "liked" } %>
              <%= f.button :submit, "", class: "feed-yes-btn"%>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="img-box">
      <div class="white-box">
        <%= render "criteria", user: @user, property_viewing: @property_viewing%>
      </div>
    </div>
    

      <div class="feed-additional-info">
        <div>
          <h2 class="header" style="margin-top: 2rem; margin-bottom: 2rem;">Additional Information</h2>

          <div class="additional-info-line" style="display: flex; margin-bottom: 1rem;">
            <div class="feed-additional-info-pill-1">
              <div>
                <i class="far fa-compass" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Location</p>
                <p style="font-size: 16px;"><%= @property.location %></p>
              </div>
            </div>

            <div class="feed-additional-info-pill-2">
              <div>
                <i class="fas fa-tag" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Price</p>
                <p style="font-size: 16px;">¥<%= "#{@property.price.to_s[0..-4]},#{@property.price.to_s[-3..-1]}" %></p>
              </div>
            </div>
          </div>

          <div class="additional-info-line" style="display: flex; margin-bottom: 1rem;">
            <div class="feed-additional-info-pill-1">
              <div>
                <i class="fas fa-key" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Key money</p>
                <p style="font-size: 16px;">¥<%= "#{@property.key_money.to_s[0..-4]},#{@property.key_money.to_s[-3..-1]}" %></p>
              </div>
            </div>

            <div class="feed-additional-info-pill-2">
              <div>
                <i class="fas fa-money-check" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Deposit</p>
                <p style="font-size: 16px;">¥<%= "#{@property.deposit.to_s[0..-4]},#{@property.deposit.to_s[-3..-1]}" %></p>
              </div>
            </div>
          </div>

          <div class="additional-info-line" style="display: flex; margin-bottom: 1rem;">
            <div class="feed-additional-info-pill-1">
              <div>
                <i class="fas fa-arrows-alt" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Layout</p>
                <p style="font-size: 16px;"><%= @property.layout %></p>
              </div>
            </div>

            <div class="feed-additional-info-pill-2">
              <div>
                <i class="fas fa-ruler-combined" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Size</p>
                <p style="font-size: 16px;"><%= @property.size %>m²</p>
              </div>
            </div>
          </div>

          <div class="additional-info-line" style="display: flex; margin-bottom: 1rem;">
            <div class="feed-additional-info-pill-1">
              <div>
                <i class="fas fa-arrow-up" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Floor</p>
                <p style="font-size: 16px;"><%= @property.floor %></p>
              </div>
            </div>

            <div class="feed-additional-info-pill-2">
              <div style="height: auto; width: auto;">
                <i class="fas fa-heartbeat" style="color: white; margin-left: 1rem;"></i>
              </div>
              <div class="feed-additional-info-box-content">
                <p style="font-size: 12px; font-weight: bold;">Age</p>
                <p style="font-size: 16px;"><%= @property.age %> years old</p>
              </div>
            </div>
          </div>

          <div class="initial-cost">
            <h2>Initial cost</h2>
            <p>Including first month’s rent, deposit, key money</p>
          </div>
          <div class="initial-cost-price">
            <p>¥<%= "#{@property.initial_cost.to_s[0..-4]},#{@property.initial_cost.to_s[-3..-1]}" %></p>
          </div>

        </div>
      </div>
  <% end %>
</div>
